

source_set("widget") {
  sources = [
    "client/capture_client.cc",
    "client/capture_client.h",
    "render_loop.cc",
    "render_loop.h",
    "widget_context.cc",
    "widget_context.h",
    "widget_event_dispatcher.cc",
    "widget_event_dispatcher.h",
    "widget_targeter.cc",
    "widget_targeter.h",
    "widget_tree_host.cc",
    "widget_tree_host.h",
    "widget_tree_host_win.cc",
    "widget_tree_host_win.h",
    "widget.cc",
    "widget.h",
  ]

  deps = [
    "//skia",
    "//ui/events",
    "//ui/events/platform",
    "//ui/events:events_base",
    "//ui/gfx",
    "//ui/gfx/geometry",
    "//ui/platform_window",
  ]

  configs += ["//azer/build/config:utf8src"]
  configs += ["//azer/base:build_render_config"]
  visibility = ["//azer/render"]
}

static_library("test_support") {
  sources = [
    "tests/event_generator.cc",
    "tests/event_generator.h",
  ]

  deps = [
    "//base/test:test_support",
    "//skia",
    "//testing/gtest",
    "//ui/events",
    "//ui/events:test_support",
  ]
}

source_set("unittests") {
  sources = [
    "tests/test_base.cc",
    "tests/test_base.h",
    "tests/test_widget_delegate.cc",
    "tests/test_widget_delegate.h",
    "tests/widget_targeter_unittest.cc",
    "tests/widget_unittest.cc",
  ]

  deps = [
    "//azer/render",
    "//base/test:test_support",
    "//skia",
    "//testing/gtest",
    "//ui/events:test_support",
    ":test_support",
  ]

  configs += ["//azer/build/config:utf8src"]
  visibility = ["//azer/render:unittests"]
}

executable("demo") {
  output_name = "widget_demo"
  sources = ["demo/main.cc"]
  deps = [
    "//base",
    "//azer/render",
    "//skia",
    "//ui/events",
    "//ui/events/platform",
    "//ui/events:events_base",
    "//ui/gfx",
    "//ui/gfx/geometry",
  ]
}